<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title></title>
  </head>
  <style media="screen">
  /* *{
    margin: 0;
    padding: 0;
  } */
    #div1{
      width: 100px;
      height: 100px;
      background-color: red;
      position: absolute;
      top: 100px;

    }
  </style>
  <body>
    <div class="" id="div1">


    </div>
    <script type="text/javascript">
    function setCookie(name,value,data) {
      var adata  = new Date;
      adata.setDate(adata.getDate()+data)
      document.cookie = name + "=" +value + ";expires="+adata;
    }
    function getcookie(name) {
      var arr = document.cookie.split("; ");

      for (var i = 0; i < arr.length; i++) {
        var arr2 = arr[i].split('=');
        if (arr2[0] == name) {
          return arr2[1];

        }
      }
      return "meiyou";
    }
    function removeCookie(name) {

      setCookie(name,"1",-1);
    }

    var oDiv1 = document.getElementById('div1');
    var xx ;
    var yy ;
    var xa =  getcookie("x");
    var ya =  getcookie("y")
    if (xa) {
      oDiv1.style.left = xa+'px';
      oDiv1.style.top = ya+'px';

    }


      oDiv1.addEventListener("mousedown",function (ev) {

           var evena = ev ;

         xx = evena.clientX-oDiv1.offsetLeft;
         yy = evena.clientY-oDiv1.offsetTop;


         document.onmousemove = function (ev) {

              var evena  =  ev ;

             var l = evena.clientX-xx;
             var t = evena.clientY-yy;
             var wd = document.documentElement.clientWidth;
             var hi = document.documentElement.clientHeight
             if (l<0) {

               l = 0;

             }else if (l>wd-oDiv1.offsetWidth) {
               l = wd-oDiv1.offsetWidth
             }
             if (t<0) {
               t = 0;
             }else if (t>hi-oDiv1.offsetHeight) {
               t = hi-oDiv1.offsetHeight


             }

             oDiv1.style.left = l+"px";
             oDiv1.style.top =  t+"px";


           }

         document.onmouseup = function () {
             document.onmousemove = null;
               document.onmouseup = null;
               setCookie("x",oDiv1.offsetLeft,5)
               setCookie("y",oDiv1.offsetTop,5)
         }
      })


      //
      // oDiv1.onmouseup = function() {
      //   console.log(1);
      //   alert('1')
      //   oDiv1.onmousemove = null;
      //
      // }


    </script>
  </body>
</html>
